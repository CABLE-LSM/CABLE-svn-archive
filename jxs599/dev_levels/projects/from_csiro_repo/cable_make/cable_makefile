
DUMMYTARGET1 = cable_diag
DUMMYTARGET2 = cable_cbm
#on zjlnik i have to use gfortran
FC = gfortran 
#FC = ifort
FLINK = -c 
FINC = -I ../../include/other
#on zjlnik i have to use gfortran
FFLAGS = -O0 -x f95-cpp-input $(FINC) 
#FFLAGS = -O0 -fpp $(FINC) 
#where modules not installed link directly to netcdf
#NCDIR = /usr/local/intel/lib/            # netcdf library address on shine-cl
#NCMOD = /usr/local/intel/include/netcdf.mod                    # on shine-cl
NCDIR = /usr/local/lib/            # netcdf library address on zjlmik 
NCMOD = /usr/local/include/NETCDF.mod                    # on zjlnik 

$(DUMMYTARGET1): $(DUMMYTARGET1).F90
#where modules not installed link directly to netcdf
#	rm -f netcdf.mod
#	ln -s $(NCMOD) ./netcdf.mod
	$(FC) $(FFLAGS) -c cable_define_dimensions.F90 
	$(FC) $(FFLAGS) -c cable_diag.F90
	$(FC) $(FFLAGS) -c cable_common.F90
	$(FC) $(FFLAGS) -c cable_math_constants.F90
	$(FC) $(FFLAGS) -c cable_other_constants.F90
	$(FC) $(FFLAGS) -c cable_photosynthetic_constants.F90
	$(FC) $(FFLAGS) -c cable_physical_constants.F90
	$(FC) $(FFLAGS) -c cable_define_types.F90
	$(FC) $(FFLAGS) -c cable_abort.F90
	$(FC) $(FFLAGS) -c cable_variables.F90
	$(FC) $(FFLAGS) -c albedo_module.F90
	$(FC) $(FFLAGS) -c cable_soilsnow.F90
	$(FC) $(FFLAGS) -c cable_air.F90
	$(FC) $(FFLAGS) -c cable_albedo.F90
	$(FC) $(FFLAGS) -c cable_radiation.F90
	$(FC) $(FFLAGS) -c cable_roughness.F90
	$(FC) $(FFLAGS) -c cable_carbon.F90
	$(FC) $(FFLAGS) -c cable_canopy.F90
	$(FC) $(FFLAGS) -c cable_cbm.F90
	$(FC) $(FFLAGS) -c cable_checks.F90 
# these require .h files from elsewhere
#	$(FC) $(FFLAGS) -c cable_Exum.F90 
#	$(FC) $(FFLAGS) -c cable_IMum.F90 
#	$(FC) $(FFLAGS) -c cable_HYDum.F90 
#	$(FC) $(FFLAGS) -c cable_RADnum.F90 
##these require netcdf
##	$(FC) $(FFLAGS) -c cable_input.F90 
##	$(FC) $(FFLAGS) -c cable_output.F90 

#	$(FC) $(FFLAGS) $(FLINK) $(DUMMYTARGET1).F90	
#	$(FC) $(FFLAGS) $(FLINK) $(DUMMYTARGET2).F90	
#	$(FC) $(FFLAGS) -o $(PROG) cable_driver.f90 cable_cbm.o cable_input.o cable_output.o cable_parameters.o cable_checks.o cable_canopy.o cable_roughness.o cable_radiation.o cable_albedo.o cable_air.o cable_soilsnow.o cable_carbon.o cable_abort.o cable_define_types.o cable_physical_constants.o cable_photosynthetic_constants.o cable_other_constants.o cable_math_constants.o cable_define_dimensions.o -L$(NCDIR) -lnetcdf


clean:
	rm -f *.o cable_txt *.mod

