## this Makefile is specific to the UM in the respect that it builds UM interface routines,
## which may also require some um headers (see below UMINCLUDES)

PROG = cable
PROGi90 = cablei90

FC = ifort                    # compiler on vayu, cherax, shine

## path to UM headers/#included .h files, 
## generically in any appropriate $expid/ummodel/inc/
UMINCLUDES = /home/599/jxs599/inc/inc_UM

## path temp. to UM driver headers/#included .h files, 
#ultimately re-establish
#FINCLUDE = #$(SRC)/UM/include/

#compiler options
FFLAGS = -O0 -g -i8 -r8 -traceback -fp-model precise -ftz -fpe0  #-I $(UMINCLUDES) #-I $(FINCLUDE) 

FCOMMON = ../../core/src/common/
FSCIENCE= ../../core/src/science/
FDRIVERS = ../src/

$(PROG): $(FDRIVERS)cable_explicit_driver.F90
	$(FC) $(FFLAGS) -c $(FCOMMON)cable_define_dimensions.F90
	$(FC) $(FFLAGS) -c $(FCOMMON)cable_math_constants.F90
	$(FC) $(FFLAGS) -c $(FCOMMON)cable_other_constants.F90
	$(FC) $(FFLAGS) -c $(FCOMMON)cable_photosynthetic_constants.F90
	$(FC) $(FFLAGS) -c $(FCOMMON)cable_physical_constants.F90
	$(FC) $(FFLAGS) -c $(FCOMMON)cable_define_types.F90
	$(FC) $(FFLAGS) -c $(FCOMMON)cable_iovars.F90
	$(FC) $(FFLAGS) -c $(FCOMMON)cable_data.F90
	$(FC) $(FFLAGS) -o cable_common_module.o -c $(FCOMMON)cable_common.F90
	$(FC) $(FFLAGS) -c $(FCOMMON)cable_diag.F90
	$(FC) $(FFLAGS) -c $(FSCIENCE)cable_soilsnow.F90
	$(FC) $(FFLAGS) -c $(FSCIENCE)cable_air.F90
	$(FC) $(FFLAGS) -c $(FSCIENCE)cable_albedo.F90
	$(FC) $(FFLAGS) -c $(FSCIENCE)cable_radiation.F90
	$(FC) $(FFLAGS) -c $(FSCIENCE)cable_roughness.F90
	$(FC) $(FFLAGS) -c $(FSCIENCE)cable_carbon.F90
	$(FC) $(FFLAGS) -c $(FSCIENCE)cable_canopy.F90
	$(FC) $(FFLAGS) -c $(FSCIENCE)cable_cbm.F90
	$(FC) $(FFLAGS) -c $(FDRIVERS)cable_um_tech.F90 
	$(FC) $(FFLAGS) -c $(FDRIVERS)cable_um_init_subrs.F90 
	$(FC) $(FFLAGS) -c $(FDRIVERS)cable_um_init.F90 
	$(FC) $(FFLAGS) -c $(FDRIVERS)cable_implicit_driver.F90 
	$(FC) $(FFLAGS) -c $(FDRIVERS)cable_rad_driver.F90 
	$(FC) $(FFLAGS) -c $(FDRIVERS)cable_hyd_driver.F90 
	$(FC) $(FFLAGS) -c $(FDRIVERS)cable_explicit_driver.F90 


$(PROGi90): $(FDRIVERS)cable_explicit_driver.F90
	$(FC) $(FFLAGS) -c -P $(FCOMMON)cable_define_dimensions.F90
	$(FC) $(FFLAGS) -c -P $(FCOMMON)cable_math_constants.F90
	$(FC) $(FFLAGS) -c -P $(FCOMMON)cable_other_constants.F90
	$(FC) $(FFLAGS) -c -P $(FCOMMON)cable_photosynthetic_constants.F90
	$(FC) $(FFLAGS) -c -P $(FCOMMON)cable_physical_constants.F90
	$(FC) $(FFLAGS) -c -P $(FCOMMON)cable_define_types.F90
	$(FC) $(FFLAGS) -c -P $(FCOMMON)cable_iovars.F90
	$(FC) $(FFLAGS) -c -P $(FCOMMON)cable_common.F90
	$(FC) $(FFLAGS) -c -P $(FCOMMON)cable_diag.F90
	$(FC) $(FFLAGS) -c -P $(FSCIENCE)cable_soilsnow.F90
	$(FC) $(FFLAGS) -c -P $(FSCIENCE)cable_air.F90
	$(FC) $(FFLAGS) -c -P $(FSCIENCE)cable_albedo.F90
	$(FC) $(FFLAGS) -c -P $(FSCIENCE)cable_radiation.F90
	$(FC) $(FFLAGS) -c -P $(FSCIENCE)cable_roughness.F90
	$(FC) $(FFLAGS) -c -P $(FSCIENCE)cable_carbon.F90
	$(FC) $(FFLAGS) -c -P $(FSCIENCE)cable_canopy.F90
	$(FC) $(FFLAGS) -c -P $(FSCIENCE)cable_cbm.F90
	$(FC) $(FFLAGS) -c -P $(FDRIVERS)cable_um_tech.F90 
	$(FC) $(FFLAGS) -c -P $(FDRIVERS)cable_um_init_subrs.F90 
	$(FC) $(FFLAGS) -c -P $(FDRIVERS)cable_um_init.F90 
	$(FC) $(FFLAGS) -c -P $(FDRIVERS)cable_implicit_driver.F90 
	$(FC) $(FFLAGS) -c -P $(FDRIVERS)cable_rad_driver.F90 
	$(FC) $(FFLAGS) -c -P $(FDRIVERS)cable_hyd_driver.F90 
	$(FC) $(FFLAGS) -c -P $(FDRIVERS)cable_explicit_driver.F90 



clean:
	rm -f *.o *.mod 

