<HTML> <BODY BGCOLOR=#eeeeff LINK=#0000aa VLINK=#0000ff ALINK=#ff0000 ><BASE TARGET="bottom_target"><PRE><a name='1'>
<font color=#447700>!================================================================================<a name='2'></font>
<font color=#447700>!=== This module is intended to enable users to easily test functionality without <a name='3'></font>
<font color=#447700>!=== having to follow the technical layout of the CABLE code. This module <a name='4'></font>
<font color=#447700>!=== therefore provides a means for the user to:<a name='5'></font>
<font color=#447700>!=== 1. specify/call/use alternative subroutines<a name='6'></font>
<font color=#447700>!=== 2. pass variables<a name='7'></font>
<font color=#447700>!=== ----------------------------------------------------------------<a name='8'></font>
<font color=#447700>!=== 1. in some cases it might be clearer to include the new (version of a)<a name='9'></font>
<font color=#447700>!===    subroutine and "USE" this module where appropriate<a name='10'></font>
<font color=#447700>!=== 2. the user might want access to a variable which exists at some higher level <a name='11'></font>
<font color=#447700>!=== of the code, but is not available in that particular function. for the sake <a name='12'></font>
<font color=#447700>!=== of clarity and ease, rather that passing this variable through argument lists <a name='13'></font>
<font color=#447700>!=== this module makes it possible to access any variable, anywhere. NB. this <a name='14'></font>
<font color=#447700>!=== is NOT automatically packed into CABLE format as is done through the <a name='15'></font>
<font color=#447700>!=== interface. To use this feature:<a name='16'></font>
<font color=#447700>!===     * declare the variable name in the header of this module (as below) as <a name='17'></font>
<font color=#447700>!===     you wish to refer to it. (=var)<a name='18'></font>
<font color=#447700>!===     * "use cable_user_module" in the subroutine from which the variable <a name='19'></font>
<font color=#447700>!===     originates.<a name='20'></font>
<font color=#447700>!===     * "call cable_user_var(dim1 [, dim2, dim3], var)" in that subroutine.<a name='21'></font>
<font color=#447700>!===     dim1 (and optionally dim2, dim3) refer to the shape of the variable<a name='22'></font>
<font color=#447700>!===     at present only "REAL" variables are catered for of up to 3 dimensions <a name='23'></font>
<font color=#447700>!===     * then in that subroutine, where the existing variable you wish passed <a name='24'></font>
<font color=#447700>!===     is called for e.g. "x", include the line "var = x" <a name='25'></font>
<font color=#447700>!===     * finally "use cable_user_module" in the subroutine where you want to <a name='26'></font>
<font color=#447700>!===     access the variable (var)<a name='27'></font>
<font color=#447700>!=== **NB** <a name='28'></font>
<font color=#447700>!=== this makes a copy of "x" and changing "var" does not feed back into "x" <a name='29'></font>
<font color=#447700>!================================================================================<a name='30'></font>
<a name='31'>
<A NAME='CABLE_USER_MODULE'><A href='../../html_code/common/cable_user_module.F90.html#CABLE_USER_MODULE' TARGET='top_target'><IMG SRC="../../gif/bar_purple.gif" border=0></A><a name='32'>
<font color=#993300>module </font><font color=#cc0000>cable_user_module</font><a name='33'>
   implicit none<a name='34'>
   public  <a name='35'>
  <a name='36'>
   <font color=#447700>!--- variable declarations which can be seen wherever this module is "USED"<a name='37'></font>
   <font color=#447700>!--- for example <a name='38'></font>
   <font color=#447700>!real, allocatable, dimension(:,:) :: tstar_tile_eg<a name='39'></font>
   <a name='40'>
   <font color=#447700>!--- in this example we wish to access the "real" variable <a name='41'></font>
   <font color=#447700>!---     tstar_tile(land_pts,ntile)<a name='42'></font>
   <font color=#447700>!--- which exists in sf_exch.F90. we will refer to it elsewher in the code as<a name='43'></font>
   <font color=#447700>!---     tstar_tile_eg<a name='44'></font>
   <font color=#447700>!--- thus in sf_exch() we add the lines. <a name='45'></font>
   <font color=#447700>!--- .........<a name='46'></font>
   <font color=#447700>!---     use cable_user_module <a name='47'></font>
   <font color=#447700>!--- .........<a name='48'></font>
   <font color=#447700>!--- .........<a name='49'></font>
   <font color=#447700>!---     call cable_user_var(land_pts,ntiles,tstar_tile_eg) <a name='50'></font>
   <font color=#447700>!---     tstar_tile_eg = tstar_tile<a name='51'></font>
   <font color=#447700>!--- then to use access this var in any subroutine simply<a name='52'></font>
   <font color=#447700>!---     use cable_user_module <a name='53'></font>
   <font color=#447700>!--- and do whatever you like with tstar_tile_eg <a name='54'></font>
<a name='55'>
<A NAME='CABLE_USER_VAR'><A href='../../html_code/common/cable_user_module.F90.html#CABLE_USER_VAR' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='56'>
   <font color=#993300>interface </font><font color=#cc0000>cable_user_var</font><a name='57'>
      module procedure <A href='../../html_code/common/cable_user_module.F90.html#ALLOC_USER_VAR1'>alloc_user_var1</A><A NAME="ALLOC_USER_VAR1_1"><A href='../../html_code/common/cable_user_module.F90.html#cable_user_module.F90' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a>, <A href='../../html_code/common/cable_user_module.F90.html#ALLOC_USER_VAR2'>alloc_user_var2</A><A NAME="ALLOC_USER_VAR2_1"><A href='../../html_code/common/cable_user_module.F90.html#cable_user_module.F90' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a>, <A href='../../html_code/common/cable_user_module.F90.html#ALLOC_USER_VAR3'>alloc_user_var3</A><A NAME="ALLOC_USER_VAR3_1"><A href='../../html_code/common/cable_user_module.F90.html#cable_user_module.F90' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><a name='58'>
   end interface<a name='59'>
<a name='60'>
    <a name='61'>
   contains<a name='62'>
<a name='63'>
<A NAME='ALLOC_USER_VAR1'><A href='../../html_code/common/cable_user_module.F90.html#ALLOC_USER_VAR1' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='64'>
   <font color=#993300>subroutine </font><font color=#cc0000>alloc_user_var1</font>(dim1,var) <A href='../../call_to/ALLOC_USER_VAR1.html' TARGET='index'>1</A>,<A href='../../call_from/ALLOC_USER_VAR1.html' TARGET='index'>1</A><a name='65'>
      use <A href='../../html_code/common/cable_common.F90.html#CABLE_COMMON_MODULE'>cable_common_module</A><A href='../../html_code/common/cable_user_module.F90.html#ALLOC_USER_VAR1' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="CABLE_COMMON_MODULE_2"><a name='66'>
      implicit none <a name='67'>
      integer :: dim1   <a name='68'>
      real, allocatable, dimension(:) :: var <a name='69'>
         if (.NOT. allocated(var))  then<a name='70'>
            allocate(var(dim1))<a name='71'>
            var=0.<a name='72'>
         endif   <a name='73'>
      return<a name='74'>
   end subroutine alloc_user_var1<a name='75'>
<a name='76'>
<A NAME='ALLOC_USER_VAR2'><A href='../../html_code/common/cable_user_module.F90.html#ALLOC_USER_VAR2' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='77'>
   <font color=#993300>subroutine </font><font color=#cc0000>alloc_user_var2</font>(dim1,dim2,var) <A href='../../call_to/ALLOC_USER_VAR2.html' TARGET='index'>1</A>,<A href='../../call_from/ALLOC_USER_VAR2.html' TARGET='index'>1</A><a name='78'>
      use <A href='../../html_code/common/cable_common.F90.html#CABLE_COMMON_MODULE'>cable_common_module</A><A href='../../html_code/common/cable_user_module.F90.html#ALLOC_USER_VAR2' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="CABLE_COMMON_MODULE_3"><a name='79'>
      implicit none <a name='80'>
      integer :: dim1,dim2,i,j   <a name='81'>
      real, allocatable, dimension(:,:) :: var <a name='82'>
         if (.NOT. allocated(var)) then <a name='83'>
            allocate(var(dim1,dim2))<a name='84'>
            var=0.<a name='85'>
         endif   <a name='86'>
      return<a name='87'>
   end subroutine alloc_user_var2<a name='88'>
<a name='89'>
<A NAME='ALLOC_USER_VAR3'><A href='../../html_code/common/cable_user_module.F90.html#ALLOC_USER_VAR3' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='90'>
   <font color=#993300>subroutine </font><font color=#cc0000>alloc_user_var3</font>(dim1,dim2,var) <A href='../../call_to/ALLOC_USER_VAR3.html' TARGET='index'>1</A>,<A href='../../call_from/ALLOC_USER_VAR3.html' TARGET='index'>1</A><a name='91'>
      use <A href='../../html_code/common/cable_common.F90.html#CABLE_COMMON_MODULE'>cable_common_module</A><A href='../../html_code/common/cable_user_module.F90.html#ALLOC_USER_VAR3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="CABLE_COMMON_MODULE_4"><a name='92'>
      implicit none <a name='93'>
      integer :: dim1,dim2,dim3   <a name='94'>
      real, allocatable, dimension(:,:,:) :: var <a name='95'>
         if (.NOT. allocated(var)) then <a name='96'>
            allocate(var(dim1,dim2,dim3))<a name='97'>
            var=0.<a name='98'>
         endif   <a name='99'>
      return<a name='100'>
   end subroutine alloc_user_var3<a name='101'>
<a name='102'>
end module cable_user_module<a name='103'>
</pre></body></html>