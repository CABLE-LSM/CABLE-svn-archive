NCDIR=/apps/netcdf/4.2.1.1/lib
NCMOD=/apps/netcdf/4.2.1.1/include
FC=ifort
CFLAGS=-O0 # -g -traceback
LD=-lnetcdf -lnetcdff
LDFLAGS=-O0 # -g

# these are all the files we are compiling
LSRC = cable_ncdf.F90 cable_ncdf_wrapper.F90

# this is the executable we are building
PROG = ncdf

# from the compiled object files 
OBJS	= ${LSRC:.F90=.o} 

#compiler switches and flags
CINC = -I$(NCMOD)

#suffixes we use
.SUFFIXES:
.SUFFIXES: .F90 .o 
#default rules for these suffixes
.F90.o:
	$(FC) $(CFLAGS) $(CINC) -c $<

# default target by convention is ``all''
all : $(PROG)

#build PROG (cable executable) by linking all objects
#$(PROG) : $(OBJS)
$(PROG) : cable_ncdf_wrapper.o 
	$(FC) $(LDFLAGS) -o $@ $(OBJS) $(LD) 


# dependencies
cable_ncdf_wrapper.o: cable_ncdf.o 
